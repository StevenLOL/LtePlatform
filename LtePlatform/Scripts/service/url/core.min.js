angular.module("app.core",[]).factory("appUrlService",function(){var e=function(e){var t,n,o,a,r,i,u={};if(null===e||void 0===e)return u;for(var c=e.split("?")[1].split("&"),s=0;s<c.length;s++)-1===(n=(t=c[s]).indexOf("="))?(o=t,a=null):(o=t.substr(0,n),a=t.substr(n+1)),r=decodeURIComponent(o),i=decodeURIComponent(a),u[r]=i;return u},t=function(){if(0===window.location.hash.indexOf("#")){var t=window.location.hash.replace("/","?");return e(t)}return{}},n=function(){if(!sessionStorage.getItem("accessToken")){var e=t();e.access_token?(window.location.hash=e.state||"",sessionStorage.setItem("accessToken",e.access_token)):window.location="/Account/Authorize?client_id=web&response_type=token&state="+encodeURIComponent(window.location.hash)}};return{getApiUrl:function(e){return"/api/"+e},userInfoUrl:"/api/Me",siteUrl:"/",parseQueryString:e,getAccessToken:function(){var e=sessionStorage.getItem("accessToken");return e||n(),e||sessionStorage.getItem("accessToken")},initializeAuthorization:n,getPlanUrlHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8108/":"http://132.110.71.122:8070/"},getDtUrlHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8101/":"http://132.110.71.121:2888/"},getDistributionHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8109/":"http://132.110.71.122:8086/"},getParameterUrlHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8110/":"http://132.110.71.122:8001/"},getBuildingUrlHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8111/":"http://132.110.71.122:8002/"},getTopnUrlHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8112/":"http://132.110.71.122:8006/"},getInterferenceHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8113/":"http://132.110.71.122:18080/"},getCustomerHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8102/":"http://132.110.71.121:8018/"},getPhpHost:function(){return"119.145.142.74"===window.location.hostname?"http://119.145.142.74:8106/":"http://132.110.71.122:9000/"},getPhpUriComponent:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},initializeIndexedDb:function(e,t,n,o){var a=e.version||1,r=window.indexedDB.open(e.name,a);r.onerror=function(e){console.log(e.currentTarget.error.message)},r.onsuccess=function(t){e.db=t.target.result,o&&o()},r.onupgradeneeded=function(e){var o=e.target.result;angular.forEach(t,function(e){o.objectStoreNames.contains(e)||o.createObjectStore(e,{keyPath:n})}),console.log("DB version changed to "+a)}},updateIndexedDb:function(e,t,n,o,a){var r=e.transaction(t,"readwrite").objectStore(t),i=r.get(o);a[n]=o,i.onsuccess=function(e){e.target.result?r.put(a):r.add(a)}},refreshIndexedDb:function(e,t,n,o){var a=e.transaction(t,"readwrite").objectStore(t);a.clear(),angular.forEach(o,function(e){a.put(e)})},fetchStoreByCursor:function(e,t,n){var o=[];e.transaction(t).objectStore(t).openCursor().onsuccess=function(e){var t=e.target.result;t?(o.push(t.value),t.continue()):n&&n(o)}},stationGradeOptions:[{value:"",name:"所有级别"},{value:"A",name:"站点级别A"},{value:"B",name:"站点级别B"},{value:"C",name:"站点级别C"},{value:"D",name:"站点级别D"}],stationRoomOptions:[{value:"",name:"所有机房"},{value:"电信",name:"电信机房"},{value:"铁塔",name:"铁塔机房"},{value:"联通",name:"联通机房"}],stationTowerOptions:[{value:"",name:"全部杆塔"},{value:"电信",name:"电信杆塔"},{value:"铁塔",name:"铁塔杆塔"},{value:"联通",name:"联通杆塔"}],stationBbuOptions:[{value:"",name:"全部BBU"},{value:"是",name:"BBU池"},{value:"否",name:"非BBU池"}],stationNetworkOptions:[{value:"",name:"全部网络"},{value:"C",name:"C网络"},{value:"L",name:"L网络"},{value:"VL",name:"VL网络"},{value:"C+L",name:"C+L网络"},{value:"C+VL",name:"C+VL网络"},{value:"L+VL",name:"L+VL网络"}],stationPowerOptions:[{value:"",name:"所有动力配套"},{value:"是",name:"有动力配套"},{value:"否",name:"没有动力配套"}],stationConstructionOptions:[{value:"",name:"所有站点"},{value:"电信新建站点",name:"电信新建站点"},{value:"电信整改站点",name:"电信整改站点"},{value:"联通原有站点",name:"联通原有站点"},{value:"联通整改站点",name:"联通整改站点"}],stationIndoorOptions:[{value:"",name:"所有类型"},{value:"居民住宅",name:"居民住宅"},{value:"餐饮娱乐",name:"餐饮娱乐"},{value:"机关企业",name:"机关企业"}],stationDistincts:[{value:"SD",name:"顺德"},{value:"NH",name:"南海"},{value:"CC",name:"禅城"},{value:"SS",name:"三水"},{value:"GM",name:"高明"}]}}).controller("header.menu",function(e,t){e.emergencyUrl=t.getCustomerHost()+"IndexOfEmerCom.aspx",e.marketUrl=t.getCustomerHost()+"IndexOfTelJobs.aspx",e.rfUrl=t.getParameterUrlHost()+"RadioFreqency.html",e.commonMenu={$folded:!0}}).factory("generalHttpService",function(e,t,n,o){return{getMvcData:function(n,o){var a=e.defer();return t({method:"GET",url:n,params:o}).then(function(e){a.resolve(e.data)}).catch(function(e){a.reject(e)}),a.promise},getApiData:function(n,a){var r=e.defer();return t({method:"GET",url:o.getApiUrl(n),params:a}).then(function(e){r.resolve(e.data)}).catch(function(e){r.reject(e)}),r.promise},getApiDataWithHeading:function(n,a){var r=e.defer();return t({method:"GET",url:o.getApiUrl(n),params:a,headers:{Authorization:"Bearer "+o.getAccessToken()}}).then(function(e){r.resolve(e.data)}).catch(function(e){r.reject(e)}),r.promise},postApiData:function(n,a){var r=e.defer();return t.post(o.getApiUrl(n),a).then(function(e){r.resolve(e.data)}).catch(function(e){r.reject(e)}),r.promise},postMvcData:function(n,o){var a=e.defer();return t.post(n,o).then(function(e){a.resolve(e.data)}).catch(function(e){a.reject(e)}),a.promise},postApiDataWithHeading:function(n,a){var r=e.defer();return t({method:"POST",url:o.getApiUrl(n),data:a,headers:{Authorization:"Bearer "+o.getAccessToken()}}).then(function(e){r.resolve(e.data)}).catch(function(e){r.reject(e)}),r.promise},postPhpUrlData:function(n,a){var r=e.defer();return t({method:"POST",url:n,data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){return o.getPhpUriComponent(e)}}).then(function(e){r.resolve(e.data)}).catch(function(e){r.reject(e)}),r.promise},putApiData:function(n,a){var r=e.defer();return t.put(o.getApiUrl(n),a).then(function(e){r.resolve(e.data)}).catch(function(e){r.reject(e)}),r.promise},deleteApiData:function(n){var a=e.defer();return t.delete(o.getApiUrl(n)).then(function(e){a.resolve(e.data)}).catch(function(e){a.reject(e)}),a.promise},getJsonpData:function(n,o){var a=e.defer();return t.jsonp(n,{jsonpCallbackParam:"callback"}).then(function(e){a.resolve(o(e.data))}).catch(function(e){a.reject(e)}),a.promise},getUrlData:function(n,o){var a=e.defer();return t({method:"GET",url:n,params:o}).then(function(e){a.resolve(e.data)}).catch(function(e){a.reject(e)}),a.promise}}});