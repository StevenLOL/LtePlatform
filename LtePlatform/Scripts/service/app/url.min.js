angular.module("app.core",[]).factory("appUrlService",function(){var e=function(e){var t,n,r,i,a,o,u={};if(null===e||void 0===e)return u;for(var s=e.split("?")[1].split("&"),l=0;l<s.length;l++)-1===(n=(t=s[l]).indexOf("="))?(r=t,i=null):(r=t.substr(0,n),i=t.substr(n+1)),a=decodeURIComponent(r),o=decodeURIComponent(i),u[a]=o;return u},t=function(){if(0===window.location.hash.indexOf("#")){var t=window.location.hash.replace("/","?");return e(t)}return{}},n=function(){if(!sessionStorage.getItem("accessToken")){var e=t();e.access_token?(window.location.hash=e.state||"",sessionStorage.setItem("accessToken",e.access_token)):window.location="/Account/Authorize?client_id=web&response_type=token&state="+encodeURIComponent(window.location.hash)}};return{getApiUrl:function(e){return"/api/"+e},userInfoUrl:"/api/Me",siteUrl:"/",parseQueryString:e,getAccessToken:function(){var e=sessionStorage.getItem("accessToken");return e||n(),e||sessionStorage.getItem("accessToken")},initializeAuthorization:n,getPlanUrlHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.36:8070/":"http://10.17.165.111:8070/"},getDtUrlHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.38:2888/":"http://10.17.165.100:2888/"},getDistributionHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.36:8086/":"http://10.17.165.111:8086/"},getParameterUrlHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.36:8001/":"http://10.17.165.111:8001/"},getBuildingUrlHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.36:8002/":"http://10.17.165.111:8002/"},getTopnUrlHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.36:8006/":"http://10.17.165.111:8006/"},getInterferenceHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.36:8004/":"http://10.17.165.111:8004/"},getCustomerHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.38:8099/":"http://10.17.165.100:8099/"},getPhpHost:function(){return"219.128.254.38"===window.location.hostname?"http://219.128.254.36:9000/":"http://10.17.165.111:9000/"},getPhpUriComponent:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},initializeIndexedDb:function(e,t,n,r){var i=e.version||1,a=window.indexedDB.open(e.name,i);a.onerror=function(e){console.log(e.currentTarget.error.message)},a.onsuccess=function(t){e.db=t.target.result,r&&r()},a.onupgradeneeded=function(e){var r=e.target.result;angular.forEach(t,function(e){r.objectStoreNames.contains(e)||r.createObjectStore(e,{keyPath:n})}),console.log("DB version changed to "+i)}},updateIndexedDb:function(e,t,n,r,i){var a=e.transaction(t,"readwrite").objectStore(t),o=a.get(r);i[n]=r,o.onsuccess=function(e){e.target.result?a.put(i):a.add(i)}},refreshIndexedDb:function(e,t,n,r){var i=e.transaction(t,"readwrite").objectStore(t);i.clear(),angular.forEach(r,function(e){i.put(e)})},fetchStoreByCursor:function(e,t,n){var r=[];e.transaction(t).objectStore(t).openCursor().onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n&&n(r)}}}}).controller("header.menu",function(e,t){e.interferenceUrl=t.getInterferenceHost(),e.emergencyUrl=t.getCustomerHost()+"IndexOfEmerCom.aspx",e.repeaterUrl=t.getCustomerHost()+"IndexOfMicro.aspx",e.marketUrl=t.getCustomerHost()+"IndexOfTelJobs.aspx",e.rfUrl=t.getParameterUrlHost()+"RadioFreqency.html"}).factory("generalHttpService",function(e,t,n){return{getMvcData:function(n,r){var i=e.defer();return t({method:"GET",url:n,params:r}).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise},getApiData:function(r,i){var a=e.defer();return t({method:"GET",url:n.getApiUrl(r),params:i}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},getApiDataWithHeading:function(r,i){var a=e.defer();return t({method:"GET",url:n.getApiUrl(r),params:i,headers:{Authorization:"Bearer "+n.getAccessToken()}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},postApiData:function(r,i){var a=e.defer();return t.post(n.getApiUrl(r),i).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},postMvcData:function(n,r){var i=e.defer();return t.post(n,r).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise},postApiDataWithHeading:function(r,i){var a=e.defer();return t({method:"POST",url:n.getApiUrl(r),data:i,headers:{Authorization:"Bearer "+n.getAccessToken()}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},postPhpUrlData:function(r,i){var a=e.defer();return t({method:"POST",url:r,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){return n.getPhpUriComponent(e)}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},putApiData:function(r,i){var a=e.defer();return t.put(n.getApiUrl(r),i).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},deleteApiData:function(r){var i=e.defer();return t.delete(n.getApiUrl(r)).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise},getJsonpData:function(n,r){var i=e.defer();return t.jsonp(n).success(function(e){i.resolve(r(e))}).error(function(e){i.reject(e)}),i.promise},getUrlData:function(n,r){var i=e.defer();return t({method:"GET",url:n,params:r}).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise}}}),angular.module("app.menu",["ui.grid","ui.bootstrap"]).factory("menuItemService",function(e,t){return{updateMenuItem:function(e,t,n,r,i){if(!(t>=e.length)){i=i||"";for(var a=e[t].subItems,o=0;o<a.length;o++)if(a[o].displayName===n)return;a.push({displayName:n,url:r,masterName:i}),angular.forEach(e,function(e){e.isActive=!1}),e[t].isActive=!0}},showGeneralDialog:function(n){e.open({animation:!0,templateUrl:n.templateUrl,controller:n.controller,size:n.size||"lg",resolve:n.resolve}).result.then(function(e){console.log(e)},function(){t.info("Modal dismissed at: "+new Date)})},showGeneralDialogWithAction:function(n,r){e.open({animation:!0,templateUrl:n.templateUrl,controller:n.controller,size:n.size||"lg",resolve:n.resolve}).result.then(function(e){r(e)},function(){t.info("Modal dismissed at: "+new Date)})},showGeneralDialogWithDoubleAction:function(t,n,r){e.open({animation:!0,templateUrl:t.templateUrl,controller:t.controller,size:t.size||"lg",resolve:t.resolve}).result.then(function(e){n(e)},function(){r()})}}}),angular.module("app.format",[]).factory("appFormatService",function(){return{getDate:function(strDate){var date=eval("new Date("+strDate.replace(/\d+(?=-[^-]+$)/,function(e){return parseInt(e,10)-1}).match(/\d+/g)+")");return date},getUTCTime:function(strDate){var date=eval("new Date("+strDate.replace(/\d+(?=-[^-]+$)/,function(e){return parseInt(e,10)-1}).match(/\d+/g)+")");return Date.UTC(date.getFullYear(),date.getMonth()+1,date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),0)},getDateString:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)n.hasOwnProperty(r)&&new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},lowerFirstLetter:function(e){return e.substring(0,1).toLowerCase()+e.substring(1)},getId:function(e){return void 0!==window.document&&document.getElementById&&document.getElementById(e)},queryEscapeText:function(e){return e?(e+="").replace(/['"<>&]/g,function(e){switch(e){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}}):""},getUrlParams:function(){var e={},t=window.location.search.slice(1).split("&");return t[0]&&angular.forEach(t,function(t){var n=t.split("=");n[0]=decodeURIComponent(n[0]),n[1]=!n[1]||decodeURIComponent(n[1]),e[n[0]]?e[n[0]]=[].concat(e[n[0]],n[1]):e[n[0]]=n[1]}),e},searchText:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},searchPattern:function(e,t){for(var n=0;n<e.length;n++)if(new RegExp(e[n]).test(t))return e[n];return null},calculateAverages:function(e,t){var n=[];return angular.forEach(t,function(e){n.push({sum:0,count:0})}),angular.forEach(e,function(e){angular.forEach(t,function(t,r){var i=t(e);0!==i&&(n[r].sum+=i,n[r].count+=1)})}),n},prefixInteger:function(e,t){return(Array(t).join("0")+e).slice(-t)},generateSiteGroups:function(e){return[{items:[{key:"正式名称",value:e.formalName},{key:"规划名称",value:e.planName},{key:"规划编号",value:e.planNum}]},{items:[{key:"区域",value:e.district},{key:"镇区",value:e.town},{key:"获取日期",value:e.gottenDate}]},{items:[{key:"杆塔类型",value:e.towerType},{key:"天线高度",value:e.antennaHeight},{key:"开通日期",value:e.finishedDate}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute}]}]},generateSiteDetailsGroups:function(e){return[{items:[{key:"天线类型",value:e.antennaType},{key:"完工日期",value:e.completeDate},{key:"合同签订日期",value:e.contractDate}]},{items:[{key:"是否获取",value:e.isGotton?"已获取":"未获取"},{key:"受阻说明",value:e.shouzuShuoming},{key:"站点类型",value:e.siteCategory}]},{items:[{key:"站点来源",value:e.siteSource},{key:"铁塔联系人",value:e.towerContaction},{key:"铁塔盖章方案",value:e.towerScheme}]},{items:[{key:"铁塔规划需求名",value:e.towerSiteName},{key:"验收交付时间",value:e.yanshouDate}]}]},generateStationGroups:function(e){return[{items:[{key:"站点名称",value:e.StationName},{key:"机房名称",value:e.EngineRoom},{key:"站点类型",value:e.StationType}]},{items:[{key:"区域",value:e.AreaName},{key:"镇区",value:e.Town},{key:"安装地址",value:e.InstallAddr}]},{items:[{key:"杆塔类型",value:e.TowerType},{key:"天线高度",value:e.TowerHeight},{key:"开通日期",value:e.IntersectionDate}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"系统站址ID",value:e.SysStationId}]},{items:[{key:"机房归属",value:e.RoomAttribution},{key:"是否新建机房",value:e.IsNewRoom},{key:"CL网是否共用天线",value:e.IsShare}]},{items:[{key:"网络类型",value:e.NetType},{key:"是否高危站点",value:e.IsDangerous},{key:"是否简易机房",value:e.IsSimple}]},{items:[{key:"属地性质",value:e.AttributionNature},{key:"是否新建铁塔",value:e.IsNewTower},{key:"铁塔归属",value:e.TowerAttribution}]},{items:[{key:"铁塔高度",value:e.TowerHeight},{key:"铁塔类型",value:e.TowerType},{key:"铁塔编号",value:e.TowerCode}]}]},generateENodebGroups:function(e){return[{items:[{key:"基站名称",value:e.name},{key:"基站编号",value:e.eNodebId},{key:"城市",value:e.cityName}]},{items:[{key:"区域",value:e.districtName},{key:"镇区",value:e.townName},{key:"安装地址",value:e.address}]},{items:[{key:"规划编号",value:e.planNum},{key:"入网日期",value:e.openDate},{key:"厂家",value:e.factory}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"制式",value:e.divisionDuplex}]},{items:[{key:"网关",value:e.gatewayIp.addressString},{key:"IP",value:e.ip.addressString},{key:"是否在用",value:e.isInUse}]}]},generateCellGroups:function(e){return[{items:[{key:"小区名称",value:e.cellName},{key:"基站编号",value:e.eNodebId},{key:"TAC",value:e.tac}]},{items:[{key:"频段",value:e.bandClass},{key:"频点",value:e.frequency},{key:"天线增益",value:e.antennaGain}]},{items:[{key:"天线挂高",value:e.height},{key:"方位角",value:e.azimuth},{key:"下倾角",value:e.downTilt}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"室内外",value:e.indoor}]},{items:[{key:"PCI",value:e.pci},{key:"PRACH",value:e.prach},{key:"RS功率",value:e.rsPower}]}]},generateSustainGroups:function(e){return[{items:[{key:"工单编号",value:e.serialNumber},{key:"派单日期",value:e.beginDate},{key:"投诉站点",value:e.site}]},{items:[{key:"投诉分类",value:e.complainCategoryDescription},{key:"投诉原因",value:e.complainReasonDescription},{key:"投诉子原因",value:e.complainSubReasonDescription}]},{items:[{key:"投诉地址",value:e.address},{key:"联系电话",value:e.contactPhone},{key:"是否预处理",value:e.isPreProcessedDescription}]},{items:[{key:"城市",value:e.city},{key:"区域",value:e.district},{key:"镇区",value:e.town}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"专家回复",value:e.specialResponse}]},{items:[{key:"投诉来源",value:e.complainSourceDescription},{key:"问题描述",value:e.issue},{key:"反馈信息",value:e.feedbackInfo}]},{items:[{key:"投诉现象",value:e.phenomenon,span:5}]}]},generateRruGroups:function(e){return[{items:[{key:"天线厂家",value:e.antennaFactoryDescription},{key:"天线信息",value:e.antennaInfo},{key:"天线型号",value:e.antennaModel}]},{items:[{key:"电下倾角",value:e.eTilt},{key:"机械下倾",value:e.mTilt},{key:"RRU名称",value:e.rruName}]}]},generateSpecialStationGroups:function(e){return[{items:[{key:"网管站名",value:e.enodebName},{key:"基站编号",value:e.stationId},{key:"行政区",value:e.areaName}]},{items:[{key:"归属",value:e.alongTo},{key:"基站ID",value:e.enodebId},{key:"故障",value:e.fault}]},{items:[{key:"故障分类",value:e.faultType},{key:"是否恢复",value:e.isRecover}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute}]},{items:[{key:"反馈",value:e.feedback}]}]},generateSpecialIndoorGroups:function(e){return[{items:[{key:"站点名称",value:e.enodebName},{key:"行政区",value:e.areaName},{key:"割接后施主基站",value:e.afterName}]},{items:[{key:"故障类型",value:e.faultType},{key:"解决方案",value:e.solution}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute}]}]},generateZeroFlowGroups:function(e){return[{items:[{key:"基站名",value:e.enodebName},{key:"地市",value:e.city},{key:"厂家",value:e.factory}]},{items:[{key:"是否断站",value:e.isOff},{key:"是否存在小区退服",value:e.isOut},{key:"BBU是否交维",value:e.isIntersect}]},{items:[{key:"BBU是否下挂RRU",value:e.isUnderbarrel},{key:"是否已解决",value:e.isSolve},{key:"零流量原因类型",value:e.reasonType}]},{items:[{key:"计划解决时间",value:e.planDate},{key:"完成时间",value:e.finishDate},{key:"责任单位",value:e.unit}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"解决措施",value:e.solution}]}]},generateZeroVoiceGroups:function(e){return[{items:[{key:"基站名",value:e.BTSName},{key:"地市",value:e.city},{key:"厂家",value:e.factory}]},{items:[{key:"是否断站",value:e.isOff},{key:"是否存在小区退服",value:e.isOut},{key:"BBU是否交维",value:e.isIntersect}]},{items:[{key:"BBU是否下挂RRU",value:e.isUnderbarrel},{key:"是否已解决",value:e.isSolve},{key:"零话务原因类型",value:e.reasonType}]},{items:[{key:"计划解决时间",value:e.planDate},{key:"BTSTYPE",value:e.BTSTYPE},{key:"责任单位",value:e.unit}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"解决措施",value:e.solution}]}]},generateFaultStationGroups:function(e){return[{items:[{key:"站点名称",value:e.enodebName},{key:"单号",value:e.orderId},{key:"告警名称",value:e.alarmName}]},{items:[{key:"故障反馈",value:e.feedback}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute}]}]},generateCdmaCellGroups:function(e){return[{items:[{key:"基站名称",value:e.btsName},{key:"基站编号",value:e.btsId},{key:"扇区编号",value:e.sectorId}]},{items:[{key:"1X频点",value:e.onexFrequencyList},{key:"DO频点",value:e.evdoFrequencyList},{key:"天线增益",value:e.antennaGain}]},{items:[{key:"天线挂高",value:e.height},{key:"方位角",value:e.azimuth},{key:"下倾角",value:e.downTilt}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"室内外",value:e.indoor}]},{items:[{key:"PN",value:e.pn},{key:"LAC",value:e.lac},{key:"小区编号",value:e.cellId}]}]},generateDistributionGroups:function(e){return[{items:[{key:"室分名称",value:e.name},{key:"城市",value:e.city},{key:"区域",value:e.district}]},{items:[{key:"站点编号",value:e.stationNum},{key:"地址",value:e.address},{key:"维护单位",value:e.server}]},{items:[{key:"是否为LTE RRU",value:e.isLteRru?"是":"否"},{key:"LTE基站编号",value:e.eNodebId},{key:"LTE小区编号",value:e.lteSectorId}]},{items:[{key:"是否为CDMA RRU",value:e.isCdmaRru?"是":"否"},{key:"CDMA基站编号",value:e.btsId},{key:"CDMA小区编号",value:e.cdmaSectorId}]},{items:[{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute},{key:"干放个数",value:e.amplifiers}]},{items:[{key:"规模",value:e.scaleDescription},{key:"服务区域编码",value:e.serviceArea},{key:"有源器件数",value:e.sourceAppliances}]},{items:[{key:"室外微基站数",value:e.outdoorPicos},{key:"室外拉远数",value:e.outdoorRrus},{key:"室外直放站数",value:e.outdoorRepeaters}]},{items:[{key:"室内微基站数",value:e.indoorPicos},{key:"室内拉远数",value:e.indoorRrus},{key:"室内直放站数",value:e.indoorRepeaters}]}]}}}).factory("chartCalculateService",function(e){return{generateDrillDownData:function(e,t,n){var r=[];return angular.forEach(e,function(e){var i=[],a=e.district,o=n(e);angular.forEach(t,function(e){e.district===a&&i.push([e.town,n(e)])}),r.push({district:a,districtData:o,subData:i})}),r},generateDrillDownPieOptions:function(e,t){var n=new DrilldownPie;return n.initialize(t),angular.forEach(e,function(e){n.addOneSeries({name:e.type,value:e.total,subData:e.subData})}),n.options},generateDrillDownPieOptionsWithFunc:function(e,t,n){var r=new DrilldownPie;return r.initialize(t),angular.forEach(e,function(e){r.addOneSeries({name:n.nameFunc(e),value:n.valueFunc(e),subData:e.subData})}),r.options},generateDrillDownColumnOptionsWithFunc:function(e,t,n){var r=new DrilldownColumn;return r.initialize(t),angular.forEach(e,function(e){r.addOneSeries({name:n.nameFunc(e),value:n.valueFunc(e),subData:e.subData})}),r.options},generateSplineChartOptions:function(e,t,n){var r=new ComboChart;return r.initialize(n),r.xAxis[0].categories=e.statDates,angular.forEach(t,function(t,n){r.series.push({type:"spline",name:t,data:e.districtStats[n]})}),r.options},calculateMemberSum:function(e,t,n){var r=_.reduce(e,function(e,n){var r={};return angular.forEach(t,function(t){r[t]=e[t]+n[t]}),r});return n(r),r},generateDistrictStats:function(e,t,n){var r=[];return angular.forEach(t,function(t){var i=n.districtViewFunc(t),a=t.statDate,o={};n.initializeFunc(o);var u=[];angular.forEach(e,function(e){for(var t=0;t<i.length;t++){var r=i[t];if(r.district===e){u.push(n.calculateFunc(r)),n.accumulateFunc(o,r);break}}t===i.length&&u.push(n.zeroFunc())}),u.push(n.totalFunc(o)),r.push({statDate:a,values:u})}),r},generateDateDistrictStats:function(e,t,n){var r=[],i=[];return angular.forEach(e,function(e,a){r.push(e.statDate.split("T")[0]);for(var o=0;o<t;o++){var u=e.values[o]?n(e.values[o]):0;0===a?i.push([u]):i[o].push(u)}}),{statDates:r,districtStats:i}},generateStatsForPie:function(e,t,n){e.districtStats=n.districtViewsFunc(t[0]),e.townStats=n.townViewsFunc(t[0]);for(var r=1;r<t.length;r++)angular.forEach(n.districtViewsFunc(t[0]),function(t){for(var r=!1,i=0;i<e.districtStats.length;i++)if(e.districtStats[i].city===t.city&&e.districtStats[i].district===t.district){n.accumulateFunc(e.districtStats[i],t),r=!0;break}r||e.districtStats.push(t)}),angular.forEach(t[r].townPreciseView,function(t){for(var r=!1,i=0;i<e.townStats.length;i++)if(e.townStats[i].city===t.city&&e.townStats[i].district===t.district&&e.townStats[i].town===t.town){n.accumulateFunc(e.townStats[i],t),r=!0;break}r||e.townStats.push(t)});angular.forEach(e.districtStats,function(e){n.districtCalculate&&n.districtCalculate(e)}),angular.forEach(e.townStats,function(e){n.townCalculate&&n.townCalculate(e)})},generateSeriesInfo:function(e,t,n,r){var i=[];return angular.forEach(r,function(t){e[t].data=[]}),angular.forEach(t,function(t){i.push(t[n]),angular.forEach(r,function(n){e[n].data.push(t[n])})}),{categories:i,info:e}},writeSeriesData:function(e,t,n){angular.forEach(n,function(n){e.push({type:t[n].type,name:t[n].name,data:t[n].data})})},generateMrsRsrpStats:function(t){var n,r=_.range(-140,-43),i=_.range(0,97,0),a=_.map(_.range(48),function(n){var r=t["rsrP_"+e.prefixInteger(n,2)];return _.isNumber(r)?r:0});for(n=2;n<37;n++)i[n+24]=a[n];for(n=37;n<47;n++)i[2*n-13]=i[2*n-12]=a[n]/2;var o=a[47];for(n=0;n<17;n++){if(!(o>i[80+n]/2)){i[81+n]=o;break}o-=i[80+n]/2+1,i[81+n]=i[80+n]/2+1}var u=a[1]/5,s=(i[26]-u)/3;for(n=0;n<5;n++)i[21+n]=u+(n-2)*s;var l=i[21];for(n=0;n<21;n++)l>i[21-n]/2?(l-=i[21-n]/2+1,i[21-n-1]=i[21-n]/2+1):i[21-n-1]=l;return{categories:r,values:i}},generateCoverageStats:function(t){var n=_.map(_.range(48),function(n){var r=t["rsrP_"+e.prefixInteger(n,2)];return _.isNumber(r)?r:0});return{total:_.reduce(n,function(e,t){return e+t},0),sumBelow115:n[0]+n[1],sumBetween115And110:n[2]+n[3]+n[4]+n[5]+n[6],sumBetween110And105:n[7]+n[8]+n[9]+n[10]+n[11]}},generateMrsTaStats:function(t){var n=_.map(_.range(45),function(n){var r=t["tadv_"+e.prefixInteger(n,2)];return _.isNumber(r)?r:0});return{categories:[100,200,300,400,500,600,700,800,900,1e3,1150,1300,1450,1600,1750,1900,2050,2200,2350,2500,2700,2900,3100,3300,3500,3700,3900,4100,4300,4500,4700,4900,5500,6500,8e3,9500,11500,15e3,2e4],values:[n[0]+.280082*n[1],.719918*n[1]+.560164*n[2],.489836*n[2]+.840246*n[3],.159754*n[3]+n[4]+.120328*n[5],.879672*n[5]+.40041*n[6],.59959*n[6]+.680492*n[7],.319508*n[7]+.960593*n[8],.039427*n[8]+n[9]+.240655*n[10],.759345*n[11]+.520737*n[12],.479263*n[12]+.40041*n[13],.59959*n[13]+.360471*n[14],.639529*n[14]+.320533*n[15],.679467*n[15]+.280594*n[16],.719406*n[16]+.240655*n[17],.759345*n[17]+.200717*n[18],.799283*n[18]+.160778*n[19],.839222*n[19]+.12084*n[20],.87916*n[20]+.080901*n[21],.919099*n[21]+.040963*n[22],.959037*n[22]+.001024*n[23],.998976*n[23]+.281106*n[24],.718894*n[24]+.561188*n[25],.438812*n[25]+.84127*n[26],.15873*n[26]+n[27]+.121352*n[28],.878648*n[28]+.401434*n[29],.598566*n[29]+.681516*n[30],.318484*n[30]+.961598*n[31],.038402*n[31]+n[32]+.241679*n[33],.758321*n[33]+.521761*n[34],.478239*n[34]+.801843*n[35],.198157*n[35]+n[36]+.081925*n[37],.918075*n[37]+.362007*n[38],.637993*n[38]+.400282*n[39],.599718*n[39]+.200333*n[40],.799667*n[40]+.40041*n[41],.59959*n[41]+.600486*n[42],.399514*n[42]+.300147*n[43],.699853*n[43]+192e-6*n[44],.999808*n[44]]}},generateOverCoverageStats:function(t){var n=_.map(_.range(45),function(n){var r=t["tadv_"+e.prefixInteger(n,2)];return _.isNumber(r)?r:0}),r=_.map(_.range(18,45),function(n){var r=t["tadv_"+e.prefixInteger(n,2)];return _.isNumber(r)?r:0});return{total:_.reduce(n,function(e,t){return e+t},0),over:_.reduce(r,function(e,t){return e+t},0)}},generateRsrpTaStats:function(t,n){var r=[-110,-105,-100,-95,-90,-85,-80,-75,-70,-65,-60,-44];n=Math.min(Math.max(0,n),11);var i=_.map(_.range(11),function(r){var i=t["tadv"+e.prefixInteger(r,2)+"Rsrp"+e.prefixInteger(n,2)];return _.isNumber(i)?i:0});return{seriesName:0===n?"RSRP<-110dBm":r[n-1]+"dBm<=RSRP<"+r[n]+"dBm",categories:[100,200,300,400,500,600,700,800,900,1e3,1200,1400,1600,1800,2e3,2400,2800,3200,3600,4e3,5e3,6e3,8e3,1e4,15e3],values:[.426693975*i[0],.426693975*i[0],.14661205*i[0]+.280081925*i[1],.426693975*i[1],.2932241*i[1]+.133469875*i[2],.426693975*i[2],.426693975*i[2],.013142174*i[2]+.413551801*i[3],.426693975*i[3],.159754224*i[3]+.133469875*i[4],.426693975*i[4],.426693975*i[4],.013142174*i[4]+.413551801*i[5],.426693975*i[5],.159754224*i[5]+.133469875*i[6],.426693975*i[6],.426693975*i[6],.013142174*i[6]+.413551801*i[7],.426693975*i[7],.159754224*i[7]+.266939751*i[8],.129363573*i[8]+.058883769*i[9],.188247342*i[9],.376494684*i[9],.376374206*i[9]+64e-6*i[10],.500032002*i[10]]}},updateHeatMapIntervalDefs:function(e,t){var n={},r=[{key:.2,color:"rgb(100,255,100)"},{key:.5,color:"rgb(100, 255, 255)"},{key:.7,color:"rgb(255,100,200)"},{key:.85,color:"rgb(255,100,100)"}];return angular.forEach(r,function(r){n[r.key]=r.color,e.push({color:r.color,threshold:r.key*t})}),n}}}).factory("calculateService",function(e){return{calculateOverCoverageRate:function(t){var n=0,r=0;return angular.forEach(t,function(t){var i=e.generateOverCoverageStats(t);n+=i.total,r+=i.over}),r/n},calculateWeakCoverageRate:function(t){var n=0,r=0,i=0,a=0;return angular.forEach(t,function(t){var o=e.generateCoverageStats(t);n+=o.total,r+=o.sumBelow115,i+=o.sumBetween115And110,a+=o.sumBetween110And105}),{rate115:r/n,rate110:(r+i)/n,rate105:(r+i+a)/n}},generateGridDirective:function(e,t){return{controller:e.controllerName,restrict:"EA",replace:!0,scope:e.scope,template:"<div></div>",link:function(n,r,i){n.initialize=!1,n.$watch(e.argumentName,function(e){if(n.gridOptions.data=e,!n.initialize){var i=t('<div ui-grid="gridOptions"></div>')(n);r.append(i),n.initialize=!0}})}}},generateShortGridDirective:function(e,t){return{controller:e.controllerName,restrict:"EA",replace:!0,scope:e.scope,template:"<div></div>",link:function(n,r,i){n.initialize=!1,n.$watch(e.argumentName,function(e){if(n.gridOptions.data=e,!n.initialize){var i=t('<div style="height: 150px" ui-grid="gridOptions"></div>')(n);r.append(i),n.initialize=!0}})}}},generatePagingGridDirective:function(e,t){return{controller:e.controllerName,restrict:"EA",replace:!0,scope:e.scope,template:"<div></div>",link:function(n,r,i){n.initialize=!1,n.$watch(e.argumentName,function(e){if(n.gridOptions.data=e,!n.initialize){var i=t('<div ui-grid="gridOptions" ui-grid-pagination style="height: 600px"></div>')(n);r.append(i),n.initialize=!0}})}}},generateSelectionGridDirective:function(e,t){return{controller:e.controllerName,restrict:"EA",replace:!0,scope:e.scope,template:"<div></div>",link:function(n,r,i){n.initialize=!1,n.$watch(e.argumentName,function(e){if(n.gridOptions.data=e,!n.initialize){var i=t('<div ui-grid="gridOptions" ui-grid-selection></div>')(n);r.append(i),n.initialize=!0}})}}},mergeDataByKey:function(e,t,n,r){return angular.forEach(t,function(t){var i={};i[n]=t[n];var a=_.where(e,i);if(a.length>0)angular.forEach(r,function(e){a[0][e]+=t[e]});else{var o={};o[n]=t[n],angular.forEach(r,function(e){o[e]=t[e]}),e.push(o)}}),_.sortBy(e,function(e){return e[n]})},generateCellDetailsGroups:function(e){return[{items:[{key:"频点",value:e.frequency},{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute}]},{items:[{key:"天线挂高",value:e.height},{key:"方位角",value:e.azimuth},{key:"下倾角",value:e.downTilt}]},{items:[{key:"室内外",value:e.indoor},{key:"天线增益",value:e.antennaGain},{key:"RS功率",value:e.rsPower}]},{items:[{key:"PCI",value:e.pci},{key:"PRACH",value:e.prach},{key:"TAC",value:e.tac}]}]},generateFlowDetailsGroups:function(e){return[{items:[{key:"小区名称",value:e.eNodebName+"-"+e.sectorId},{key:"经度",value:e.longtitute},{key:"纬度",value:e.lattitute}]},{items:[{key:"天线挂高",value:e.height},{key:"方位角",value:e.azimuth},{key:"下倾角",value:e.downTilt}]},{items:[{key:"室内外",value:e.indoor},{key:"天线增益",value:e.antennaGain},{key:"RS功率",value:e.rsPower}]},{items:[{key:"下行流量（MB）",value:e.pdcpDownlinkFlow},{key:"上行流量（MB）",value:e.pdcpUplinkFlow},{key:"用户数",value:e.maxUsers}]},{items:[{key:"下行感知速率（Mbit/s）",value:e.downlinkFeelingRate},{key:"上行感知速率（Mbit/s）",value:e.uplinkFeelingRate},{key:"PCI",value:e.pci}]},{items:[{key:"4G下切3G次数",value:e.redirectCdma2000},{key:"4G双流比",value:e.rank2Rate},{key:"PRACH",value:e.prach}]}]},generateCellMongoGroups:function(e){return[{items:[{key:"网管PCI",value:e.phyCellId},{key:"网管PRACH",value:e.rootSequenceIdx},{key:"本地小区标识（仅华为有效）",value:e.localCellId}]},{items:[{key:"服务小区偏移量",value:e.cellSpecificOffset,filter:"dbStep32"},{key:"服务小区偏置",value:e.qoffsetFreq,filter:"dbStep32"},{key:"前导格式",value:e.preambleFmt}]}]},accumulatePreciseStat:function(e,t){e.totalMrs+=t.totalMrs,e.firstNeighbors+=t.firstNeighbors,e.secondNeighbors+=t.secondNeighbors,e.thirdNeighbors+=t.thirdNeighbors},accumulateFlowStat:function(e,t){e.pdcpDownlinkFlow+=t.pdcpDownlinkFlow,e.pdcpUplinkFlow+=t.pdcpUplinkFlow},calculateDistrictRates:function(e){return e.firstRate=100-100*e.firstNeighbors/e.totalMrs,e.preciseRate=100-100*e.secondNeighbors/e.totalMrs,e.thirdRate=100-100*e.thirdNeighbors/e.totalMrs,e},calculateTownRates:function(e){e.firstRate=100-100*e.firstNeighbors/e.totalMrs,e.preciseRate=100-100*e.secondNeighbors/e.totalMrs,e.thirdRate=100-100*e.thirdNeighbors/e.totalMrs},getValueFromDivisionAbove:function(e,t){for(var n=0;n<e.length;n++)if(t>e[n])return 5-n;return 0},getValueFromDivisionBelow:function(e,t){for(var n=0;n<e.length;n++)if(t<e[n])return 5-n;return 0},generateCoveragePointsWithFunc:function(e,t,n){var r=e.intervals;angular.forEach(t,function(t){for(var i=n(t),a=0;a<r.length;a++)if(e.sign&&i<r[a].threshold||!e.sign&&i>r[a].threshold){r[a].coors.push({longtitute:t.longtitute,lattitute:t.lattitute});break}})}}}).factory("preciseChartService",function(e,t){return{getTypeOption:function(n){return t.generateDrillDownPieOptions(e.generateCompoundStats(n),{title:"工单类型分布图",seriesName:"工单类型"})},getStateOption:function(n){return t.generateDrillDownPieOptions(e.generateCompoundStats(n),{title:"工单状态分布图",seriesName:"工单状态"})},getDistrictOption:function(n){return t.generateDrillDownPieOptions(e.generateCompoundStats(n),{title:"工单镇区分布图",seriesName:"镇区"})},getTownFlowOption:function(n){return t.generateDrillDownPieOptions(e.generateCompoundStats(n,function(e){return e.district},function(e){return e.town},function(e){return(e.pdcpDownlinkFlow+e.pdcpUplinkFlow)/1024/1024/8}),{title:"流量镇区分布图(TB)",seriesName:"区域"})},getTownUsersOption:function(n){return t.generateDrillDownPieOptions(e.generateCompoundStats(n,function(e){return e.district},function(e){return e.town},function(e){return e.maxUsers}),{title:"最大在线用户数镇区分布图(TB)",seriesName:"区域"})},getCoverageOptions:function(e){var n=new ComboChart;return n.initialize({title:"覆盖情况统计",xTitle:"RSRP(dBm)",yTitle:"MR次数"}),angular.forEach(e,function(e,r){var i=t.generateMrsRsrpStats(e);0===r&&(n.xAxis[0].categories=i.categories),n.series.push({type:"spline",name:e.statDate,data:i.values})}),n.options},getTaOptions:function(e){var n=new ComboChart;return n.initialize({title:"接入距离分布统计",xTitle:"接入距离(米)",yTitle:"MR次数"}),angular.forEach(e,function(e,r){var i=t.generateMrsTaStats(e);0===r&&(n.xAxis[0].categories=i.categories),n.series.push({type:"spline",name:e.statDate,data:i.values})}),n.options},getRsrpTaOptions:function(e,n){var r=new ComboChart;return r.initialize({title:"接入距离分布统计",xTitle:"接入距离(米)",yTitle:"MR次数"}),r.legend.align="right",angular.forEach(e,function(e,i){var a=t.generateRsrpTaStats(e,n);0===i&&(r.xAxis[0].categories=a.categories,r.title.text+="("+a.seriesName+")"),r.series.push({type:"line",name:e.statDate,data:a.values})}),r.options}}}),angular.module("app.geometry",[]).factory("geometryCalculateService",function(){var e=function(e,t,n,r){var i=e*(Math.PI/180),a=t*(Math.PI/180),o=n*(Math.PI/180),u=r*(Math.PI/180)-a,s=o-i,l=Math.pow(Math.sin(s/2),2)+Math.cos(i)*Math.cos(o)*Math.pow(Math.sin(u/2),2);return 6378.137*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},t=function(t,n,r){var i=t.lat+r/e(t.lat,t.lng,t.lat+1,t.lng),a=t.lng+n/e(t.lat,t.lng,t.lat,t.lng+1);return new BMap.Point(a,i)};return{getDistanceFunc:function(t,n,r,i){return e(t,n,r,i)},getLonLatFunc:function(e,n,r){return t(e,n,r)},getPositionFunc:function(e,n,r){var i=n*Math.cos(r*Math.PI/180),a=n*Math.sin(r*Math.PI/180);return t(e,i,a)},getPositionRadius:function(e,n,r){var i=n*Math.cos(r),a=n*Math.sin(r);return t(e,i,a)},getRadiusFunc:function(e){var t=70,n=.2;switch(e){case 15:n*=.75,t*=.75;break;case 16:n/=2.5,t/=2.5;break;case 17:n/=5,t/=5}return{rSector:n,rStation:t}}}}).factory("geometryService",function(e){return{getDistance:function(t,n,r,i){return e.getDistanceFunc(t,n,r,i)},getLonLat:function(t,n,r){return e.getLonLatFunc(t,n,r)},getPosition:function(t,n,r){return e.getPositionFunc(t,n,r)},getPositionLonLat:function(t,n,r){var i=n*Math.cos(r*Math.PI/180),a=n*Math.sin(r*Math.PI/180),o=t.lattitute+a/e.getDistanceFunc(t.lattitute,t.longtitute,t.lattitute+1,t.longtitute);return{longtitute:t.longtitute+i/e.getDistanceFunc(t.lattitute,t.longtitute,t.lattitute,t.longtitute+1),lattitute:o}},generateSectorPolygonPoints:function(t,n,r,i,a){var o,u,s=[],l=e.getRadiusFunc(i).rSector*(a||1);for(u=0;u<=l;u+=l/2)o=e.getPositionFunc(t,u,n),s.push(o);for(u=0;u<=r;u+=r/5)o=e.getPositionFunc(t,l,u+n),s.push(o);return s},getRadius:function(t){return e.getRadiusFunc(t)},getDtPointRadius:function(e){var t=17;switch(e){case 15:t*=.9;break;case 16:t*=.8;break;case 17:t*=.75}return t},getArrowLine:function(t,n,r,i,a){var o=Math.atan2(i-n,r-t),u={lng:r,lat:i},s=e.getPositionRadius(u,-a,o-.2),l=e.getPositionRadius(u,-a,o+.2);return new BMap.Polyline([new BMap.Point(r,i),s,l,new BMap.Point(r,i),new BMap.Point(t,n)],{strokeColor:"blue",strokeWeight:1})},getLine:function(e,t,n,r,i){return i=i||"orange",new BMap.Polyline([new BMap.Point(n,r),new BMap.Point(e,t)],{strokeColor:i,strokeWeight:1})},getCircle:function(e,t,n,r,i,a){r=r||"orange";var o=new BMap.Circle(new BMap.Point(e,t),n,{strokeColor:r,fillColor:r});return o.addEventListener("click",function(){i(a)}),o},getPathInfo:function(e){var t="";return angular.forEach(e,function(e,n){n>0&&(t+=";"),t+=e.lng+";"+e.lat}),t},queryMapColors:function(){return["#CC3333","#3366D0","#CC9966","#003300","#99CC00","#FF9966","#CC6699","#9933FF","#333300"]},queryConstructionIcon:function(e){var t={"审计会审":"/Content/Images/BtsIcons/alarm_lightyellow.png","天馈施工":"/Content/Images/BtsIcons/alarm_yellow.png","整体完工":"/Content/Images/BtsIcons/alarm_lightblue.png","基站开通":"/Content/Images/BtsIcons/alarm_green.png","其他":"/Content/Images/BtsIcons/alarm_red.png"}[e];return t||(t="/Content/Images/BtsIcons/alarm_purple.png"),new BMap.Icon(t,new BMap.Size(22,28))}}}),angular.module("app.calculation",[]).factory("preciseWorkItemGenerator",function(){return{generatePreciseInterferenceNeighborDtos:function(e){var t=0,n=0,r=0,i=0,a=[];return angular.forEach(e,function(e){t+=e.overInterferences6Db,n+=e.overInterferences10Db,r+=e.mod3Interferences,i+=e.mod6Interferences}),angular.forEach(e,function(e){if(e.destENodebId>0&&e.destSectorId>0){var o=100*e.overInterferences6Db/t,u=100*e.overInterferences10Db/n,s=100*e.mod3Interferences/r,l=100*e.mod6Interferences/i;(o>10||u>10||s>10||l>10)&&a.push({eNodebId:e.destENodebId,sectorId:e.destSectorId,db6Share:o,db10Share:u,mod3Share:s,mod6Share:l})}}),a},generatePreciseInterferenceVictimDtos:function(e){var t=0,n=0,r=0,i=0,a=[];return angular.forEach(e,function(e){t+=e.overInterferences6Db,n+=e.overInterferences10Db,r+=e.mod3Interferences,i+=e.mod6Interferences}),angular.forEach(e,function(e){if(e.victimENodebId>0&&e.victimSectorId>0){var o=100*e.overInterferences6Db/t,u=100*e.overInterferences10Db/n,s=100*e.mod3Interferences/r,l=100*e.mod6Interferences/i;(o>10||u>10||s>10||l>10)&&a.push({eNodebId:e.victimENodebId,sectorId:e.victimSectorId,backwardDb6Share:o,backwardDb10Share:u,backwardMod3Share:s,backwardMod6Share:l})}}),a}}}).factory("neGeometryService",function(){var e=function(e){return!isNaN(e)&&e>112&&e<114},t=function(e){return!isNaN(e)&&e>22&&e<24},n=function(n){return e(n.longtitute)&&t(n.lattitute)},r=function(e,t){e.longtitute=t.longtitute,e.lattitute=t.lattitute};return{queryENodebLonLatEdits:function(e){for(var t=[],r=0;r<e.length;r++)n(e[r])||t.push({index:r,eNodebId:e[r].eNodebId,name:e[r].name,district:e[r].districtName,town:e[r].townName,longtitute:e[r].longtitute,lattitute:e[r].lattitute});return t},queryBtsLonLatEdits:function(e){for(var t=[],r=0;r<e.length;r++)n(e[r])||t.push({index:r,bscId:e[r].bscId,btsId:e[r].btsId,name:e[r].name,districtName:e[r].districtName,longtitute:eNodebs[r].longtitute,lattitute:eNodebs[r].lattitute});return t},queryCellLonLatEdits:function(e){for(var t=[],r=0;r<e.length;r++)n(e[r])||t.push({index:r,eNodebId:e[r].eNodebId,sectorId:e[r].sectorId,frequency:e[r].frequency,isIndoor:e[r].isIndoor,longtitute:e[r].longtitute,lattitute:e[r].lattitute});return t},queryCdmaCellLonLatEdits:function(e){for(var t=[],r=0;r<e.length;r++)n(e[r])||t.push({index:r,btsId:e[r].btsId,sectorId:e[r].sectorId,frequency:e[r].frequency,isIndoor:e[r].isIndoor,longtitute:e[r].longtitute,lattitute:e[r].lattitute});return t},mapLonLatEdits:function(e,t){for(var i=e(),a=0;a<t.length;a++)t[a].longtitute=parseFloat(t[a].longtitute),t[a].lattitute=parseFloat(t[a].lattitute),n(t[a])&&(console.log(t[a]),r(i[t[a].index],t[a]));e(i)},queryNearestRange:function(e,t){return{west:e-1e-6,east:e+1e-6,south:t-1e-6,north:t+1e-6}},queryNearRange:function(e,t){return{west:e-.01,east:e+.01,south:t-.01,north:t+.01}}}}).factory("generalChartService",function(){return{getPieOptions:function(e,t,n,r){var i=new GradientPie;return i.title.text=t.title,i.series[0].name=t.seriesTitle,angular.forEach(e,function(e){i.series[0].data.push({name:n(e),y:r(e)})}),i.options},getColumnOptions:function(e,t,n,r){var i=new ComboChart;return i.title.text=t.title,i.xAxis[0].title.text=t.xtitle,i.yAxis[0].title.text=t.ytitle,i.xAxis[0].categories=n(e),i.series.push({type:"column",name:t.ytitle,data:r(e)}),i.options},getStackColumnOptions:function(e,t,n,r){var i=new StackColumnChart;return i.title.text=t.title,i.xAxis.title.text=t.xtitle,i.yAxis.title.text=t.ytitle,i.xAxis.categories=_.map(e,function(e){return n(e)}),angular.forEach(r,function(n,r){i.series.push({name:t.seriesTitles[r],data:_.map(e,function(e){return n(e)})})}),i.options},queryColumnOptions:function(e,t,n){var r=new ComboChart;return r.title.text=e.title,r.xAxis[0].title.text=e.xtitle,r.yAxis[0].title.text=e.ytitle,r.xAxis[0].categories=t,e.min&&r.setDefaultYAxis({min:e.min}),e.max&&r.setDefaultYAxis({max:e.max}),r.series.push({type:"column",name:e.ytitle,data:n}),r.options},queryDoubleColumnOptions:function(e,t,n,r){var i=new ComboChart;return i.title.text=e.title,i.xAxis[0].title.text=e.xtitle,i.yAxis[0].title.text=e.ytitle,i.xAxis[0].categories=t,i.series.push({type:"column",name:e.ytitle1,data:n}),i.series.push({type:"column",name:e.ytitle2,data:r}),i.options},queryMultipleColumnOptions:function(e,t,n,r){var i=new ComboChart;return i.title.text=e.title,i.xAxis[0].title.text=e.xtitle,i.yAxis[0].title.text=e.ytitle,i.xAxis[0].categories=t,angular.forEach(n,function(e,t){i.series.push({type:"column",name:r[t],data:e})}),i.options},queryMultipleComboOptions:function(e,t,n,r,i){var a=new ComboChart;return a.title.text=e.title,a.xAxis[0].title.text=e.xtitle,a.yAxis[0].title.text=e.ytitle,a.xAxis[0].categories=t,angular.forEach(n,function(e,t){a.series.push({type:i[t],name:r[t],data:e})}),a.options},queryMultipleComboOptionsWithDoubleAxes:function(e,t,n,r,i,a){var o=new ComboChart;return o.title.text=e.title,o.xAxis[0].title.text=e.xtitle,o.yAxis[0].title.text=e.ytitles[0],o.pushOneYAxis(e.ytitles[1]),o.xAxis[0].categories=t,angular.forEach(n,function(e,t){o.series.push({type:i[t],name:r[t],data:e,yAxis:a[t]})}),o.options},generateColumnData:function(e,t,n){var r={categories:[],dataList:[]};return angular.forEach(n,function(e){r.dataList.push([])}),angular.forEach(e,function(e){r.categories.push(t(e)),angular.forEach(n,function(t,n){r.dataList[n].push(t(e))})}),r},generateColumnDataByKeys:function(e,t,n){var r={categories:[],dataList:[]};return angular.forEach(n,function(e){r.dataList.push([])}),angular.forEach(e,function(e){r.categories.push(e[t]),angular.forEach(n,function(t,n){r.dataList[n].push(e[t])})}),r},generateCompoundStats:function(e,t,n,r){var i=[];return angular.forEach(e,function(e){var a,o=void 0!==t?t(e):e.type,u=void 0!==n?n(e):e.subType,s=void 0!==r?r(e):e.total;for(a=0;a<i.length;a++)if(i[a].type===(o||"无有效值")){i[a].total+=s,i[a].subData.push([u||"无有效值",s]);break}a===i.length&&i.push({type:o||"无有效值",total:s,subData:[[u||"无有效值",s]]})}),i}}}).factory("parametersChartService",function(e){return{getDistrictLteENodebPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各区LTE基站数分布",seriesTitle:"区域"},function(e){return e.district},function(e){return e.totalLteENodebs})},getDistrictLteCellPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各区LTE小区数分布",seriesTitle:"区域"},function(e){return e.district},function(e){return e.totalLteCells})},getDistrictCdmaBtsPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各区CDMA基站数分布",seriesTitle:"区域"},function(e){return e.district},function(e){return e.totalCdmaBts})},getDistrictCdmaCellPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各区CDMA小区数分布",seriesTitle:"区域"},function(e){return e.district},function(e){return e.totalCdmaCells})},getTownLteENodebPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各镇LTE基站数分布",seriesTitle:"镇"},function(e){return e.town},function(e){return e.totalLteENodebs})},getTownLteCellPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各镇LTE小区数分布",seriesTitle:"镇"},function(e){return e.town},function(e){return e.totalLteCells})},getTownCdmaBtsPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各镇CDMA基站数分布",seriesTitle:"镇"},function(e){return e.town},function(e){return e.totalCdmaBts})},getTownCdmaCellPieOptions:function(t,n){return e.getPieOptions(t,{title:n+"各镇CDMA小区数分布",seriesTitle:"镇"},function(e){return e.town},function(e){return e.totalCdmaCells})},getCollegeDistributionForDownlinkFlow:function(t){return e.getPieOptions(t,{title:"校园网下行流量分布",seriesTitle:"下行流量(MB)"},function(e){return e.name},function(e){return e.pdcpDownlinkFlow})},getCollegeDistributionForUplinkFlow:function(t){return e.getPieOptions(t,{title:"校园网上行流量分布",seriesTitle:"上行流量(MB)"},function(e){return e.name},function(e){return e.pdcpUplinkFlow})},getCollegeDistributionForAverageUsers:function(t){return e.getPieOptions(t,{title:"校园网平均用户数分布",seriesTitle:"平均用户数"},function(e){return e.name},function(e){return e.averageUsers})},getCollegeDistributionForActiveUsers:function(t){return e.getPieOptions(t,{title:"校园网最大激活用户数分布",seriesTitle:"最大激活用户数"},function(e){return e.name},function(e){return e.maxActiveUsers})},getCellDistributionForDownlinkFlow:function(t,n){return e.queryColumnOptions({title:"小区下行流量分布",xtitle:"小区名称",ytitle:"下行流量(MB)"},t.categories,t.dataList[n])},getCellDistributionForUplinkFlow:function(t,n){return e.queryColumnOptions({title:"小区上行流量分布",xtitle:"小区名称",ytitle:"上行流量(MB)"},t.categories,t.dataList[n])},getCellDistributionForAverageUsers:function(t,n){return e.queryColumnOptions({title:"平均用户数分布",xtitle:"小区名称",ytitle:"平均用户数"},t.categories,t.dataList[n])},getCellDistributionForActiveUsers:function(t,n){return e.queryColumnOptions({title:"最大激活用户数分布",xtitle:"小区名称",ytitle:"最大激活用户数"},t.categories,t.dataList[n])},getDateFlowOptions:function(t,n,r){return e.queryDoubleColumnOptions({title:"流量变化趋势",xtitle:"日期",ytitle1:"下行流量(MB)",ytitle2:"上行流量(MB)"},t.categories,t.dataList[n],t.dataList[r])},getDateUsersOptions:function(t,n,r){return e.queryDoubleColumnOptions({title:"用户数变化趋势",xtitle:"日期",ytitle1:"平均用户数",ytitle2:"最大激活用户数"},t.categories,t.dataList[n],t.dataList[r])},getCellIndoorTypeColumnOptions:function(t){return e.getStackColumnOptions(t,{title:"各区室内外小区分布",xtitle:"区域",ytitle:"小区数",seriesTitles:["室内小区","室外小区"]},function(e){return e.district},[function(e){return e.totalIndoorCells},function(e){return e.totalOutdoorCells}])},getCellBandClassColumnOptions:function(t){return e.getStackColumnOptions(t,{title:"各区小区频段分布",xtitle:"区域",ytitle:"小区数",seriesTitles:["2.1G频段","1.8G频段","800M频段","TDD频段"]},function(e){return e.district},[function(e){return e.band1Cells},function(e){return e.band3Cells},function(e){return e.band5Cells},function(e){return e.band41Cells}])}}}),angular.module("myApp.url",["app.core","app.menu","app.format","app.geometry","app.calculation"]);