/**
 * angular-avatar
 * Angular Avatar is an AngularJS directive that generates a letter's avatar like Google does in several web apps. First letter of each word in a string will be used to generate the avatar.
 * @version v1.0.4 - 2016-05-08
 * @link https://github.com/ajsoriar/angular-avatar
 * @author Andres J. Soria R. <ajsoriar@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(){"use strict";var ngavatar=angular.module("ngAvatar",[]);ngavatar.directive("ngAvatar",[function(){return{restrict:"AE",replace:!0,scope:{initials:"@initials",width:"@width",bgcolor:"@bgColor",textColor:"@textColor",wrapper:"@wrapper",pictureResolution:"@pictureResolution",pixelated:"@pixelated",roundShape:"@roundShape","class":"@class",style:"@style",string:"@string",cornerRadius:"@cornerRadius",autocolor:"@autocolor",pictureFormat:"@pictureFormat"},link:function(scope,element,attrs){function generateAvatar(name,w,h,bgcolor,textcolor,bgImage){var WIDTH=256,HEIGHT=256;void 0!=w&&w>0&&void 0!=h&&h>0&&(WIDTH=w,HEIGHT=h);var canvas=document.createElement("canvas");canvas.id="ngAvatar-"+Date.now(),canvas.width=WIDTH,canvas.height=HEIGHT;var ctx=canvas.getContext("2d");ctx.fillStyle=bgcolor,ctx.fillRect(0,0,WIDTH,HEIGHT),ctx.font=WIDTH/2+"px Arial",ctx.textAlign="center",ctx.fillStyle=textcolor,ctx.fillText(_str,WIDTH/2,HEIGHT/1.5);var img=canvas.toDataURL("image/"+_picture_format);return img}function getInitialsFromString(str){var output="",i=0,str=str.split(" "),len=str.length;for(i;len>i;i++)""!=str[i]&&(output+=str[i][0].toUpperCase());return output}var _long=45,_picture_resolution=256,_wrapper=!0,_str=scope.initials||"",_bgcolor="#000",_textcolor="#fff",_pixelated=!1,_img_styling="vertical-align: top;",_roundShape=!1,_wrapper_styling="border-radius: 0;display: block;overflow: hidden;",_extra_classes="",_extra_styles="",_corner_radius="0",_picture_format="png";void 0!=scope.bgcolor&&(_bgcolor=scope.bgcolor),void 0!=scope.textColor&&(_textcolor=scope.textColor),void 0!=scope.wrapper&&(_wrapper=scope.wrapper),void 0!=scope.pictureResolution&&(_picture_resolution=scope.pictureResolution),void 0!=scope.width&&(_long=scope.width),void 0!=scope.pixelated&&(_pixelated=scope.pixelated,"true"===_pixelated&&(_img_styling+="image-rendering: pixelated; image-rendering: -moz-crisp-edges;")),void 0!=scope.roundShape?(_roundShape=scope.roundShape,_roundShape&&(_wrapper_styling+="border-radius: "+_long+"px;")):void 0!=scope.cornerRadius&&(_corner_radius=scope.cornerRadius,_wrapper_styling+="border-radius: "+_corner_radius+"px;"),void 0!=scope["class"]&&(_extra_classes=scope["class"]),void 0!=scope.style&&(_extra_styles=scope.style),void 0!=scope.string&&(_str=getInitialsFromString(scope.string)),"jpeg"===scope.pictureFormat&&(_picture_format="jpeg");var imgData=generateAvatar(_str,_picture_resolution,_picture_resolution,_bgcolor,_textcolor,null),html="";_wrapper&&(html+='<div class="avatar-wrapper '+_extra_classes+'" style="'+_wrapper_styling+"width: "+_long+"px;height: "+_long+"px;"+_extra_styles+'">'),html+='<img src="'+imgData+'" class="avatar-picture" style="'+_img_styling+'" width="100%" height="" />',_wrapper&&(html+="</div>"),element.replaceWith(html)}}}])}();